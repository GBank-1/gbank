-- Create
create table cliente (
        id bigint generated by default as identity,
        nome varchar(255),
        sobrenome varchar(255),
        password varchar(255),
        primary key (id)
);
-- Agencia
 create table Agencia (
         codigo char(4)
 );

create table conta (
        id bigint generated by default as identity,
        ativa boolean not null,
        numero bigint,
        cliente_id bigint,
        saldo decimal(19, 2),
        primary key (id)
);

create table historico_transferencia (
        id integer generated by default as identity,
        data timestamp,
        realizada boolean not null,
        tipo varchar(255),
        valor decimal(19, 2),
        destino_id bigint,
        origem_id bigint,
        primary key (id)
);


-- Alter
alter table conta
add constraint FK_CONTA_CLIENTE_01 foreign key (cliente_id) references cliente;
alter table historico_transferencia
add constraint FK_HISTORICO_CONTA_01 foreign key (origem_id) references conta;
alter table historico_transferencia
add constraint FK_HISTORICO_CONTA_02 foreign key (destino_id) references conta;
